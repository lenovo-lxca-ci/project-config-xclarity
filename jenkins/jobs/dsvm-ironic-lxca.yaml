- job-template:
    name: 'lenovo-tempest-dsvm-ironic-lxca'
    node: '{node}'

    wrappers:
      - timeout:
          timeout: 125
          fail: true
      - timestamps

    builders:
      - link-logs
      - net-info
      - devstack-checkout
      - shell: |
          #!/bin/bash -xe
          # clone devstack-gate for ironic-lxca
          if [[ -e LENOVO-CI-JOBS ]]; then
              rm -rf ./LENOVO-CI-JOBS
          fi
          git clone https://github.com/lenovo-lxca-ci/LENOVO-CI-JOBS.git
          chmod +x ./LENOVO-CI-JOBS/xclarity/gate.sh

          # Configure molteniron


          # Generate MoltenIron Id for node

          # Allocate test node
          ./LENOVO-CI-JOBS/xclarity/gate.sh

          # Run ironic-lxca gate

          # Release test node
          

    publishers:
      - devstack-logs
      - console-log
